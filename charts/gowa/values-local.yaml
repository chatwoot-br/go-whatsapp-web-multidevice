# Local development values for gowa Helm chart
# docker buildx build --no-cache --load --platform linux/arm64 -t ghcr.io/chatwoot-br/go-whatsapp-web-multidevice:latest -f docker/golang.Dockerfile .
# Usage: helm install gowa ./charts/gowa -f charts/gowa/values-local.yaml
# helm upgrade gowa ./charts/gowa -f charts/gowa/values-local.yaml
# helm uninstall gowa
# Access:
#   kubectl port-forward svc/gowa 8088:8088 8080:8080 9001:9001 3001:3001 3002:3002
#   Supervisor: http://localhost:9001
#   Admin API: http://localhost:8088
#   Swagger UI: http://localhost:8080

# Single replica for local development
replicaCount: 1

# Image configuration
image:
  tag: latest  # Uncomment to pin specific version
  pullPolicy: Never

# Admin API configuration
admin:
  port: 8088
  token: "local-dev-token"  # Required for admin API auth
  supervisor:
    password: "local-dev-password"

# No ingress - use port-forward for local access
ingress:
  enabled: false

# Minimal resources for local k8s
resources:
  requests:
    cpu: 100m
    memory: 256Mi

# Persistence for WhatsApp sessions
persistence:
  enabled: true
  size: 512Mi

# Enable Swagger UI for API exploration
swaggerUI:
  enabled: true

# Enable cleanup to prevent disk fill
cleanup:
  enabled: true
  schedule: "0 2 * * *"
  retentionDays: 3

# Development environment variables
env:
  - name: APP_DEBUG
    value: "true"
  - name: ADMIN_DEBUG
    value: "true"
